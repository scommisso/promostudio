@using Newtonsoft.Json
@using PromoStudio.Resources
@model PromoStudio.Web.ViewModels.CustomizeViewModel
@{
    ViewBag.Title = string.Format("{0} - {1}", Strings.BuildStep__Build, Strings.BuildStep__Customize);
    Layout = "~/Views/Build/_BuildLayout.cshtml";
}
@section scripts {
    <script>
        require(["viewModels/scaffold"], function () {
            require(["viewModels/brandingViewModel", "jqueryui"], function(branding, $) {
                $(function() {
                    var vm = new branding(@Html.Raw(JsonConvert.SerializeObject(Model)));
                    vm.Bind("#main form", ".progress-bar");
                });
            });
        });
    </script>
}

<form action="#">
	@* accordion *@
	<ul class="accordion" style="display: none" data-bind="visible: true">
        <!-- ko with: PhotoSection -->
		<li data-bind="visible: IsVisible, css: { 'active': StartOpen, 'done': IsCompleted }">
			@* opener *@
			<a class="opener" href="#">
				<div class="holder">
					<span class="num"><em data-bind="text: StepNumber"></em></span>
					<span class="title">
						<strong>@Strings.Photos</strong>
						<span data-bind="text: TitleText"></span>
					</span>
				</div>
			</a>
			@* slide *@
			<div class="slide">
				@* list-buttons *@
				<ul class="list-buttons" data-bind="foreach: PhotoSlots">
					<li>
						<div class="upload-image" data-bind="visible: IsCompleted">
							<img src="#" width="228" height="130" data-bind="attr: { 'src': PhotoUrl, 'alt': PhotoName }">
							<span class="title" data-bind="text: PhotoName"></span>
						</div>



                        <div class="file-area" data-bind="css: { 'no-file': !IsCompleted() }, click: ChoosePhoto" style="position: relative">
                            <div class="jcf-input-wrapper">
                                <label class="jcf-fake-input">
                                    <span><em>
                                        <span>@Strings.BuildStep__Choose_photo</span>
                                        <!-- ko text: Title --><!-- /ko -->
                                    </em></span>
                                </label>
                                <a href="#photoChooserModal" class="jcf-upload-button" rel="lightbox" data-fb-hideclose="true">
                                    <span>Browse</span>
                                </a>
                            </div>
                        </div>


						<span class="file-input-text">
						</span>
					</li>
				</ul>
				@* large-image *@
                <div data-bind="visible: !!SelectedSlot()">
                    <!-- ko with: SelectedSlot -->
				    <div class="large-image">
					    <img src="#" data-bind="attr: { 'src': PhotoUrl, 'alt': PhotoName }">
					    @* tools *@
					    <div class="tools" style="display:none"> @* Remove display:none style when we support this *@
						    @* style *@
						    <ul class="style">
							    <li><a class="bold" href="#">B</a></li>
							    <li class="active"><a class="italic" href="#">I</a></li>
							    <li><a class="underline" href="#">T</a></li>
						    </ul>
						    @* font *@
						    <select>@* Bind to font names when this is supported *@
							    <option>Segoe Script</option>
							    <option>Segoe Script</option>
							    <option>Segoe Script</option>
							    <option>Segoe Script</option>
						    </select>
						    @* align *@
						    <ul class="align">
							    <li><a class="left" href="#">@Strings.left</a></li>
							    <li class="active"><a class="center" href="#">@Strings.center</a></li>
							    <li><a class="right" href="#">@Strings.right</a></li>
						    </ul>
					    </div>
				    </div>
                    <div style="display:none"> @* Remove display:none style when we support this *@
				        <textarea class="text-area" cols="30" rows="10" placeholder="@Strings.BuildStep__Insert_your_text_here"></textarea>
				        <span class="signs">-300</span>@* Add knockout charsleft binding when this is supported *@
                    </div>
				    <div class="btn-holder">
					    <input type="submit" value="@Strings.BuildStep__Add_to_selected_frame">
				    </div>
                    <!-- /ko -->
                </div>
			</div>
		</li>
        <!-- /ko -->
        <!-- ko with: BrandingSection -->
		<li data-bind="visible: IsVisible, css: { 'active': StartOpen, 'done': IsCompleted }">
			@* opener *@
			<a class="opener" href="#">
				<div class="holder">
					<span class="num"><em data-bind="text: StepNumber"></em></span>
					<span class="title">
						<strong>@Strings.BuildStep__Logo</strong>
						<span>@Strings.BuildStep__Upload_your_logo</span>
					</span>
				</div>
			</a>
			@* slide *@
			<div class="slide">
				@* upload-logo *@
				<div class="upload-logo">
					<input type="file" title="@Strings.BuildStep__Choose_logo" data-bind="event: { 'change': FileSelected }">
					<span class="file-input-text">@Strings.BuildStep__No_file_selected</span>
				</div>
				@* options *@
				<ul class="options" style="display:none"> @* Show this when we support transitions *@
					<li>
						<div class="wrap"></div>
						<div class="check-holder">
							<input id="check01" type="checkbox">
							<label for="check01">Fade_in</label>
						</div>
					</li>
					<li>
						<div class="wrap"></div>
						<div class="check-holder">
							<input id="check02" checked="checked" type="checkbox">
							<label for="check02">Left to right</label>
						</div>
					</li>
					<li>
						<div class="wrap"></div>
						<div class="check-holder">
							<input id="check03" type="checkbox">
							<label for="check03">Right to left</label>
						</div>
					</li>
					<li>
						<div class="wrap"></div>
						<div class="check-holder">
							<input id="check04" type="checkbox">
							<label for="check04">Dissolve</label>
						</div>
					</li>
				</ul>
			</div>
		</li>
        <!-- /ko -->
        <!-- ko with: TextSection -->
		<li data-bind="visible: IsVisible, css: { 'active': StartOpen, 'done': IsCompleted }">
			@* opener *@
			<a class="opener" href="#">
				<div class="holder">
					<span class="num"><em data-bind="text: StepNumber"></em></span>
					<span class="title">
						<strong>@Strings.BuildStep__Lower_Third</strong>
						<span>@Strings.BuildStep__This_image_is_at_the_bottom_of_your_video</span>
					</span>
				</div>
			</a>
			@* slide *@
			<div class="slide">
				@* contact-info *@
				<div class="contact-info" data-bind="foreach: TextTemplateItems">
					<div class="row">
						<label data-bind="text: Name, attr: { 'for': 'text_' + SortOrder() }">Add your phone number</label>
						<input data-bind="value: TextValue, valueUpdate: 'afterkeydown', attr: { 'id': 'text_' + SortOrder(), 'type': InputType }">
					</div>
				</div>
				@* options *@
				<ul class="options" style="display: none"> @* Show this when we support lower third placement options *@
					<li>
						<div class="wrap"></div>
						<div class="check-holder">
							<input id="check05" type="checkbox">
							<label for="check05">No lower third</label>
						</div>
					</li>
					<li>
						<div class="wrap"></div>
						<div class="check-holder">
							<input id="check06" checked="checked" type="checkbox">
							<label for="check06">logo on left - website on right</label>
						</div>
					</li>
					<li>
						<div class="wrap"></div>
						<div class="check-holder">
							<input id="check07" type="checkbox">
							<label for="check07">logo on right - website on left</label>
						</div>
					</li>
					<li>
						<div class="wrap"></div>
						<div class="check-holder">
							<input id="check08" type="checkbox">
							<label for="check08">Website &amp; phone number only</label>
						</div>
					</li>
				</ul>
			</div>
		</li>
        <!-- /ko -->
        <!-- ko with: CtaSection -->
		<li data-bind="visible: IsVisible, css: { 'active': StartOpen, 'done': IsCompleted }">
			@*@ opener *@
			<a class="opener" href="#">
				<div class="holder">
					<span class="num"><em data-bind="text: StepNumber"></em></span>
					<span class="title">
						<strong>@Strings.BuildStep__Call_to_Action</strong>
						<span>@Strings.BuildStep__Help_your_viewers_engage_with_your_video</span>
					</span>
				</div>
			</a>
			@* slide *@
			<div class="slide">
				@* action-block *@
				<div class="action-block">
					<div class="box">
						<input id="none" checked="checked" type="checkbox" />
						<label for="none">None</label>
					</div>
					<div class="box">
						<div class="check-wrap">
							<input id="website3" type="checkbox" />
							<label for="website3">Add your website</label>
						</div>
						<div class="block">
							<div class="text-holder">
								<div class="row">
									<label for="text">Text</label>
									<input id="text" type="text" placeholder="ex. Vist us now!">
								</div>
								<div class="row">
									<label for="website2">Url</label>
									<input id="website2" type="text" placeholder="www.YourWebsiteHere.com ">
								</div>
							</div>
							<div class="image-holder">
								<div class="image">
									<img src="images/img04.jpg" width="228" height="130" alt="image description">
									<span>Section 1 - appx. 0:12 into video</span>
								</div>
								<a href="#">Preview</a>
							</div>
						</div>
					</div>
					<div class="box">
						<div class="check-wrap">
							<input id="contact-form" type="checkbox" />
							<label for="contact-form">Add your contact form</label>
						</div>
						<div class="block">
							<div class="text-holder">
								<div class="row">
									<label for="text2">Text</label>
									<input id="text2" type="text" placeholder="ex. Fill out this form for more information!">
								</div>
								<span class="title">Optional Form Fields</span>
								<ul class="check-list">
									<li>
										<input id="check-1" type="checkbox" />
										<label for="check-1">Full name*</label>
									</li>
									<li>
										<input id="check-2" type="checkbox" />
										<label for="check-2">Email address*</label>
									</li>
									<li>
										<input id="check-3" type="checkbox" />
										<label for="check-3">Phone*</label>
									</li>
									<li>
										<input id="check-4" type="checkbox" />
										<label for="check-4">Comments*</label>
									</li>
								</ul>
							</div>
							<div class="image-holder">
								<div class="image">
									<img src="images/img04.jpg" width="228" height="130" alt="image description">
									<span>Section 1 - appx. 0:12 into video</span>
								</div>
								<a href="#">Preview</a>
							</div>
						</div>
					</div>
					<div class="box">
						<div class="check-wrap popup-wrap">
							<input id="notiifications" type="checkbox" />
							<label for="notiifications">Notiifications </label>
							<div class="popup-box">
								<a class="open" href="#">?</a>
								<div class="popup">
									Recieve SMS Text Messages or Email Notifcations when a viewer engages with your call to action.
								</div>
							</div>
						</div>
						<div class="block2">
							<div class="col-1">
								<div class="row">
									<input id="sms" type="checkbox">
									<label for="sms">SMS Text Message</label>
								</div>
								<div class="row">
									<input id="email" type="checkbox">
									<label for="email">Email</label>
								</div>
							</div>
							<div class="col-2">
								<div class="row">
									<label for="phone">Phone</label>
									<input id="phone" type="tel" placeholder="555.555.5555">
								</div>
								<div class="row">
									<label for="address">Address</label>
									<input id="address" type="email" placeholder="email@youraddress.com">
								</div>
							</div>
						</div>
					</div>
					<div class="box">
						<input id="share" checked="checked" type="checkbox" />
						<label for="share">Let your viewers share your video</label>
					</div>
				</div>
			</div>
		</li>
        <!-- /ko -->
        <!-- ko with: EndingSection -->
		<li data-bind="visible: IsVisible, css: { 'active': StartOpen, 'done': IsCompleted }">
			@* opener *@
			<a class="opener" href="#">
				<div class="holder">
					<span class="num"><em data-bind="text: StepNumber"></em></span>
					<span class="title">
						<strong>@Strings.BuildStep__Ending</strong>
						<span>@Strings.BuildStep__This_is_the_last_frame_your_viewers_will_see</span>
					</span>
				</div>
			</a>
			@* slide *@
			<div class="slide">
				<!-- options -->
				<ul class="options">
					<li>
						<div class="wrap"></div>
						<div class="check-holder">
							<input id="check09" type="checkbox">
							<label for="check09">Animated logo with text</label>
						</div>
					</li>
					<li>
						<div class="wrap"></div>
						<div class="check-holder">
							<input id="check10" checked="checked" type="checkbox">
							<label for="check10">Animated logo with text below</label>
						</div>
					</li>
					<li>
						<div class="wrap"></div>
						<div class="check-holder">
							<input id="check11" type="checkbox">
							<label for="check11">Animated logo with text above</label>
						</div>
					</li>
					<li>
						<div class="wrap"></div>
						<div class="check-holder">
							<input id="check12" type="checkbox">
							<label for="check12">Animated logo with text on right</label>
						</div>
					</li>
				</ul>
				@* large-image *@
				<div class="large-image">
					<img src="images/img05.jpg" alt="image description">
					@* tools *@
					<div class="tools">
						@* style *@
						<ul class="style">
							<li><a class="bold" href="#">B</a></li>
							<li class="active"><a class="italic" href="#">I</a></li>
							<li><a class="underline" href="#">T</a></li>
						</ul>
						@* font *@
						<select>
							<option>Segoe Script</option>
							<option>Segoe Script</option>
							<option>Segoe Script</option>
							<option>Segoe Script</option>
						</select>
						@* align *@
						<ul class="align">
							<li><a class="left" href="#">left</a></li>
							<li class="active"><a class="center" href="#">center</a></li>
							<li><a class="right" href="#">right</a></li>
						</ul>
					</div>
				</div>
				<textarea class="text-area" cols="30" rows="10" placeholder="Insert your text here"></textarea>
				<span class="signs">-300</span>
				<div class="btn-holder">
					<input type="submit" value="Add to selected frame">
				</div>
			</div>
		</li>
        <!-- /ko -->
	</ul>
</form>

@section modals {
	<div class="popup-holder" style="display: none" data-bind="visible: true">
        <div class="lightbox" id="photoChooserModal" tabindex="-1">
		    <div class="title">
                <h4 class="modal-title">@Strings.Modals__Choose_a_Photo</h4>
		    </div>
		    <div class="modal-dialog" data-bind="template: { name: 'photo-chooser-template' }">
		    </div>
        </div>
    </div>
    
    @* This is in a template to prevent issues with multiple bindings when re-opening the modal *@
    <script type="text/html" id="photo-chooser-template">
        <div class="modal-body">
			@* tabset *@
			<nav  class="tabset">
				<ul>
					<li><a href="#companyPhotos" data-bind="css: { 'active': !ShowCustomerAtStart() }">Company Photos</a></li>
					<li><a href="#myPhotos" data-bind="css: { 'active': ShowCustomerAtStart }">My Photos</a></li>
				</ul>
			</nav>
			@* tab-content *@
			<div class="tab-content">
				@* myPhotos *@
				<section id="myPhotos">
	                <ul class="list-photo" data-bind="foreach: CustomerPhotos">
		                <li data-bind="css: { 'checked': $parent.IsSelected($data) }">
			                <div class="photo">
				                <img src="#" data-bind="attr: { 'src': LinkUrl, 'alt': LinkFileName }">
			                </div>
			                <div class="title">
				                <input type="checkbox" data-bind="attr: AttrBinding, event: { 'change': ToggleSelection }">
				                <label data-bind="attr: { 'for': AttrBinding().id }, text: LinkFileName"></label>
			                </div>
		                </li>
                    </ul>
                    <div>
                        TODO: Upload photos here
                    </div>
				</section>
				@* companyPhotos *@
				<section id="companyPhotos">
	                <ul class="list-photo" data-bind="foreach: OrganizationPhotos">
		                <li data-bind="css: { 'checked': $parent.IsSelected($data) }">
			                <div class="photo">
				                <img src="#" data-bind="attr: { 'src': LinkUrl, 'alt': LinkFileName }">
			                </div>
			                <div class="title">
				                <input type="checkbox" data-bind="attr: AttrBinding, event: { 'change': ToggleSelection }">
				                <label data-bind="attr: { 'for': AttrBinding().id }, text: LinkFileName"></label>
			                </div>
		                </li>
                    </ul>
				</section>
			</div>
		    <div class="btn-holder">
			    <input class="save" type="submit" value="@Strings.OK" data-bind="click: Save">
			    <input type="submit" value="@Strings.Cancel" data-bind="click: Cancel">
		    </div>
        </div>
    </script>
}
