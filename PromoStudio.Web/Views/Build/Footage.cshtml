@using Newtonsoft.Json
@using PromoStudio.Resources
@model PromoStudio.Web.ViewModels.FootageViewModel
@{
    ViewBag.Title = string.Format("{0} - {1}", Strings.BuildStep__Build, Strings.BuildStep__Footage);
    Layout = "~/Views/Build/_BuildLayout.cshtml";
}
@section scripts {
    <script>
        require(["viewModels/scaffold"], function () {
            require(["viewModels/footageViewModel", "jqueryui"], function (footage, $) {
                $(function () {
                    var vm = new footage(@Html.Raw(JsonConvert.SerializeObject(Model)));
                    vm.Bind("#main form", ".progress-bar", ".popup-holder");
                });
            });
        });
    </script>
}

<form action="#">
	@* list-video *@
	<ul class="list-video" style="display: none" data-bind="visible: true, foreach: Storyboards">
		<li style="display:none" data-bind="visible: true, css: { 'checked': $parent.IsSelected($data) }">
			<div class="video">
				<img src="#" data-bind="attr: { 'src': ThumbnailUrl, 'alt': Name }">
				<a class="play" href="#" data-bind="attr: { 'href': '#vid_' + pk_StoryboardId() }">play</a>
			</div>
			<div class="title">
				<input type="checkbox" data-bind="attr: AttrBinding, event: { 'change': ToggleSelection }">
				<label data-bind="attr: { 'for': AttrBinding().id }, text: Name"></label>
			</div>
		</li>
    </ul>
</form>

@section modals {    
	<div class="popup-holder" style="display: none" data-bind="visible: true, foreach: Storyboards">
		<div class="lightbox" data-bind="attr: { 'id': 'vid_' + pk_StoryboardId() }">
			<div class="title">
                <!-- ko text: Name --><!-- /ko -->
			</div>
			<div class="video-holder">
                @* Embed Codes Go Here *@
				<a href="#"></a>
				<img src="#" data-bind="attr: { 'src': ThumbnailUrl, 'alt': Name }">
			</div>
		</div>
	</div>
}