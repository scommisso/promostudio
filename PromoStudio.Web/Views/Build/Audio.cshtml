@using Newtonsoft.Json
@using PromoStudio.Resources
@model PromoStudio.Web.ViewModels.AudioViewModel
@{
    ViewBag.Title = string.Format("{0} - {1}", Strings.BuildStep__Build, Strings.BuildStep__Audio);
    Layout = "~/Views/Build/_BuildLayout.cshtml";
}
@section scripts {
    <script>
        require(["viewModels/scaffold"], function () {
            require(["viewModels/audioViewModel", "jqueryui"], function(audio, $) {
                $(function() {
                    var vm = new audio(@Html.Raw(JsonConvert.SerializeObject(Model)));
                    vm.Bind("#main form", ".progress-bar");
                });
            });
        });
    </script>
}

<form action="#">
	@* accordion *@
	<ul class="accordion" style="display: none" data-bind="visible: true">
        <!-- ko with: MusicSection -->
		<li data-bind="css: { 'active': StartOpen, 'done': IsCompleted, 'not-done': !IsCompleted() }">
			@* opener *@
			<a class="opener" href="#">
				<div class="holder">
					<span class="num"><em>1</em></span>
					<span class="title">
						<strong>@Strings.BuildStep__Music</strong>
						<span>@Strings.BuildStep__Choose_your_background_music</span>
					</span>
				</div>
			</a>
			@* slide *@
			<div class="slide">
				@* tabset *@
				<nav  class="tabset">
					<ul>
						<li><a href="#tab1" data-bind="css: { 'active': StartOpen }">Rock</a></li>
						<li><a href="#tab2">HipHop</a></li>
					</ul>
				</nav>
				@* tab-content *@
				<div class="tab-content">
					@* tab1 *@
					<section id="tab1">
						@* list-of-audio *@
						<ul class="list-of-audio" data-bind="foreach: AvailableMusic">
							<li>
								<span class="image">
									<a href="#" class="btn-play" data-bind="click: Play, css: { 'playing': IsPlaying }">@Strings.play</a>
									<img width="79" height="72" src="@Url.Content("~/Content/images/img03.jpg")" data-bind="attr: { 'alt': Description }">
								</span>
								<label data-bind="attr: { 'for': AttrBinding().id }">
									<span class="info">
										<strong data-bind="text: Name"></strong>
                                        <!-- ko text: Description --><!-- /ko -->
									</span>
				                    <input type="checkbox" data-bind="attr: AttrBinding, event: { 'change': ToggleSelection }">
								</label>
                                <div class="audio-player"
                                    data-bind="jplayer: { 'media': MediaSource, 'title': Name, 'isPlaying': IsPlaying, 'options': { 'solution': 'html5,flash' } }"> 
                                </div>
							</li>
						</ul>
					</section>
					@* tab2 *@
					<section id="tab2">
                        Hip Hop here
					</section>
				</div>
			</div>
		</li>
        <!-- /ko -->
        <!-- ko with: ActorSection -->
		<li data-bind="css: { 'active': StartOpen, 'done': IsCompleted, 'not-done': !IsCompleted() }">
			@* opener *@
			<a class="opener" href="#">
				<div class="holder">
					<span class="num"><em>2</em></span>
					<span class="title">
						<strong>@Strings.BuildStep__Voice</strong>
						<span>@Strings.BuildStep__Choose_your_voiceover_talent</span>
					</span>
				</div>
			</a>
			@* slide *@
			<div class="slide">
				@* voice-block *@
				<div class="voice-block">
					<div class="col">
						<h3>Male</h3>
						@* list-of-audio *@
						<ul class="list-of-audio" data-bind="foreach: AvailableActors">
							<li>
								<div class="image">
									<a href="#" class="btn-play2" data-bind="click: Play, css: { 'playing': IsPlaying }">@Strings.play</a>
									<img src="#" width="79" height="72" data-bind="attr: { 'alt': FullName, 'src': PhotoUrl }" />
								</div>
								<label data-bind="attr: { 'for': AttrBinding().id }">
									<span class="info">
										<strong data-bind="text: FullName"></strong>
									</span>
				                    <input type="checkbox" data-bind="attr: AttrBinding, event: { 'change': ToggleSelection }">
								</label>
                                <div class="audio-player"
                                    data-bind="jplayer: { 'media': MediaSource, 'title': FullName, 'isPlaying': IsPlaying, 'options': { 'solution': 'html,flash' } }">
                                </div>
							</li>
						</ul>
					</div>
					<div class="col">
						<h3>Female</h3>
					</div>
				</div>
			</div>
		</li>
        <!-- /ko -->
	</ul>
</form>
