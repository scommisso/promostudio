define(["lib/normalize"],function(n){function c(n,t){for(var i=0,r=n.length;i<r;i++)if(n[i]===t)return i;return-1}var i,l,v,y,p,w,k,o,d,g,nt;if(typeof window=="undefined")return{load:function(n,t,i){i()}};var h=!1,s=document.getElementsByTagName("head")[0],t=window.navigator.userAgent.match(/Trident\/([^ ;]*)|AppleWebKit\/([^ ;]*)|Opera\/([^ ;]*)|rv\:([^ ;]*)(.*?)Gecko\/([^ ;]*)|MSIE\s([^ ;]*)/),f=!1;t&&(t[1]||t[7]?(f=parseInt(t[1])<6||parseInt(t[7])<=9,t="trident"):t[2]?(f=!0,t="webkit"):t[3]||(t[4]?(f=parseInt(t[4])<18,t="gecko"):h&&alert("Engine detection failed"))),i={},l=/^\/|([^\:\/]*:)/,i.pluginBuilder="./css-builder";var r=[],u={},a=[];if(i.addBuffer=function(n){c(r,n)==-1&&c(a,n)==-1&&(r.push(n),a.push(n))},i.setBuffer=function(t,f){var s=window.location.pathname.split("/"),h,e,o;for(s.pop(),s=s.join("/")+"/",h=require.toUrl("base_url").split("/"),h.pop(),e=h.join("/")+"/",e=n.convertURIBase(e,s,"/"),e.match(l)||(e="/"+e),e.substr(e.length-1,1)!="/"&&(e=e+"/"),i.inject(n(t,e,s)),o=0;o<r.length;o++)(f&&r[o].substr(r[o].length-5,5)==".less"||!f&&r[o].substr(r[o].length-4,4)==".css")&&(function(n){u[n]=u[n]||!0,setTimeout(function(){typeof u[n]=="function"&&u[n](),delete u[n]},7)}(r[o]),r.splice(o--,1))},i.attachBuffer=function(n,t){for(var i=0;i<r.length;i++)if(r[i]==n)return u[n]=t,!0;return u[n]===!0?(u[n]=t,!0):c(a,n)!=-1?(t(),!0):void 0},v=function(n,t){setTimeout(function(){for(var r,i=0;i<document.styleSheets.length;i++)if(r=document.styleSheets[i],r.href==n.href)return t();v(n,t)},10)},y=function(n,t){setTimeout(function(){try{return n.sheet.cssRules,t()}catch(i){}y(n,t)},10)},t=="trident"&&f)var tt=[],it=[],et=0,ot=function(n,t){var i;it.push({url:n,cb:t}),i=tt.shift(),!i&&et++<31&&(i=document.createElement("style"),s.appendChild(i)),i&&rt(i)},rt=function(n){var t=it.shift(),i;if(!t){n.onload=w,tt.push(n);return}n.onload=function(){t.cb(t.ss),rt(n)},i=n.styleSheet,t.ss=i.imports[i.addImport(t.url)]};p=function(n){var t=document.createElement("link");return t.type="text/css",t.rel="stylesheet",t.href=n,t},w=function(){},i.linkLoad=function(n,i){var o=setTimeout(function(){h&&alert("timeout"),i()},g*1e3-100),u=function(){clearTimeout(o),r&&(r.onload=w),setTimeout(i,7)},r,e;f?t=="webkit"?(r=p(n),v(r,u),s.appendChild(r)):t=="gecko"?(e=document.createElement("style"),e.textContent='@import "'+n+'"',y(e,u),s.appendChild(e)):t=="trident"&&ot(n,u):(r=p(n),r.onload=u,s.appendChild(r))};var ut=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],b={},st=function(n,t,i){if(b[n]){t(b[n]);return}var r,u,f;if(typeof XMLHttpRequest!="undefined")r=new XMLHttpRequest;else if(typeof ActiveXObject!="undefined")for(u=0;u<3;u+=1){f=ut[u];try{r=new ActiveXObject(f)}catch(e){}if(r){ut=[f];break}}r.open("GET",n,requirejs.inlineRequire?!1:!0),r.onreadystatechange=function(){var u,f;r.readyState===4&&(u=r.status,u>399&&u<600?(f=new Error(n+" HTTP status: "+u),f.xhr=r,i(f)):(b[n]=r.responseText,t(r.responseText)))},r.send(null)},ft=0,e;return i.inject=function(n){ft<31&&(e=document.createElement("style"),e.type="text/css",s.appendChild(e),ft++),e.styleSheet?e.styleSheet.cssText+=n:e.appendChild(document.createTextNode(n))},k=/@import\s*(url)?\s*(('([^']*)'|"([^"]*)")|\(('([^']*)'|"([^"]*)"|([^\)]*))\))\s*;?/g,o=window.location.pathname.split("/"),o.pop(),o=o.join("/")+"/",d=function(t,i,r){t.match(l)||(t="/"+n.convertURIBase(t,o,"/")),st(t,function(u){var a,l,h;u=n(u,t,o);for(var e=[],s=[],c=[],f;f=k.exec(u);)a=f[4]||f[5]||f[7]||f[8]||f[9],e.push(a),s.push(k.lastIndex-f[0].length),c.push(f[0].length);for(l=0,h=0;h<e.length;h++)(function(n){d(e[n],function(t){var f,r;for(u=u.substr(0,s[n])+t+u.substr(s[n]+c[n]),f=t.length-c[n],r=n+1;r<e.length;r++)s[r]+=f;l++,l==e.length&&i(u)},r)})(h);e.length==0&&i(u)},r)},i.normalize=function(n,t){return n.substr(n.length-4,4)==".css"&&(n=n.substr(0,n.length-4)),t(n)},nt=!1,i.load=function(n,t,r,u,e){var o,s;(g=g||u.waitSeconds||7,o=n+(e?".less":".css"),i.attachBuffer(o,r))||(s=t.toUrl(o),!nt&&h&&(alert(f?"hacking links":"not hacking"),nt=!0),e?d(s,function(n){e&&(n=e(n,function(n){i.inject(n),setTimeout(r,7)}))}):i.linkLoad(s,r))},h&&(i.inspect=function(){return stylesheet.styleSheet?stylesheet.styleSheet.cssText:stylesheet.innerHTML?stylesheet.innerHTML:void 0}),i});
//# sourceMappingURL=css.min.js.map